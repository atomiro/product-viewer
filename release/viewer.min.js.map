{"version":3,"sources":["viewer.js"],"names":["CameraDollyControl","camera","rendererElement","init","mousemove","onMouseMove","mousedown","onMouseDown","mouseup","onMouseUp","hover","onHoverIn","onHoverOut","_","debounce","onMouseWheel","leading","$","window","on","addEventListener","onTouchMove","onTouchEnd","onTouchStart","event","Math","abs","cameraDist","obj","panLockAt","delta","getMouseMoveDelta","cameraHeight","constrainVerticalPan","minCameraHeight","maxCameraHeight","position","y","lookAt","THREE","Vector3","mouseIn","preventDefault","deltaY","ControlUtils","clamp","originalEvent","constrainZoom","minZoomDistance","maxZoomDistance","x","centerCamera","mouseDown","touchStartTime","timeStamp","touches","length","initMouseY","pageY","dx","pageX","dy","currentDist","sqrt","lastDist","getTouchMoveVertical","speed","distDelta","mouseY","totalZoomDist","zoomLevel","lerp","initHeight","min","max","touchDelta","deltaX","mouseX","this","MeshControl","meshes","angle","PI","mouseSpeed","rotateTo","touchDeltaY","initMouseX","touchDeltaX","touchTracker","console","log","i","mesh","rotateOnAxis","rotationSpeed","setRotationSpeed","TouchTracker","element","el","posX","posY","startTime","self","startPosX","startPosY","getTouchMoveDelta","getDeltas","Viewer","textureArray","options","loadScene","sceneFile","settings","assetPath","objloader","ObjectLoader","load","setup","xhr","round","loaded","total","renderer","WebGLRenderer","antialias","setPixelRatio","DEVICE_PIXEL_RATIO","setSize","canvasWidth","canvasHeight","append","domElement","scene","background","Color","sceneBackgroundColor","grid","GridHelper","add","textureManager","LoadingManager","onError","onProgress","onLoad","initialized","setupMeshes","setupCamera","render","Event","trigger","loadTexture","PerspectiveCamera","fov","aspectRatio","CAM_NEAR_PLANE","CAM_FAR_PLANE","cameraXPosition","cameraYPosition","cameraControl","children","object","type","rotation","initialRotation","push","material","map","textures","visible","meshControl","getTextureByName","name","texture","textureFileName","texturePath","textureLoader","TextureLoader","storeTexture","filename","updateTexture","needsUpdate","debounceResize","resizeRenderer","width","updateProjectionMatrix","requestAnimationFrame","create","extend","resize","toggleModels","plusModel","straightModel","switchTexture","addTexture","devicePixelRatio","value","clampedValue","p0","p1","progress","pu"],"mappings":"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","file":"viewer.min.js"}