{"version":3,"sources":["viewer.js"],"names":["CameraDollyControl","camera","rendererElement","options","init","$","extend","settings","self","panLockAt","Math","abs","maxZoomDistance","mousemove","onMouseMove","mousedown","onMouseDown","mouseup","onMouseUp","hover","onHoverIn","onHoverOut","_","debounce","onMouseWheel","leading","window","on","addEventListener","onTouchMove","event","cameraDist","delta","getMouseMoveDelta","cameraHeight","mousePanSpeedFactor","constrainVerticalPan","minCameraHeight","maxCameraHeight","position","y","lookAt","THREE","Vector3","console","log","mouseIn","preventDefault","deltaY","ControlUtils","clamp","originalEvent","constrainZoom","minZoomDistance","x","centerCamera","mouseDown","touches","length","touchTracker","direction","speedY","touchPanSpeedFactor","deltaDistance","totalZoomDist","zoomLevel","lerp","initHeight","min","max","deltaX","mouseX","pageX","mouseY","pageY","this","TouchTracker","MeshControl","meshes","angle","PI","mouseSpeedFactor","rotateTo","speedX","touchSpeedFactor","i","mesh","rotateOnAxis","element","el","onTouchStart","onTouchEnd","posX","posY","startTime","timeStamp","currentDistance","touchDistance","lastDistance","getTouchMoveDelta","detectDirection","startPosX","startPosY","dx","dy","distance","sqrt","getDeltas","Viewer","textureArray","loadScene","sceneFile","assetPath","objloader","ObjectLoader","load","setup","xhr","round","loaded","total","renderer","WebGLRenderer","antialias","setPixelRatio","DEVICE_PIXEL_RATIO","setSize","canvasWidth","canvasHeight","append","domElement","scene","background","Color","sceneBackgroundColor","grid","GridHelper","add","textureManager","LoadingManager","onError","onProgress","onLoad","initialized","setupMeshes","setupCamera","render","Event","trigger","loadTexture","PerspectiveCamera","fov","aspectRatio","CAM_NEAR_PLANE","CAM_FAR_PLANE","cameraXPosition","center","geometry","boundingBox","cameraSettings","size","cameraControl","children","object","type","rotation","initialRotation","push","material","map","textures","computeBoundingBox","visible","bbox1","BoundingBoxHelper","bbox2","update","meshControl","getTextureByName","name","texture","textureFileName","texturePath","textureLoader","TextureLoader","storeTexture","filename","updateTexture","needsUpdate","debounceResize","resizeRenderer","width","updateProjectionMatrix","requestAnimationFrame","css","cameraYPosition","create","resize","toggleModels","plusModel","straightModel","switchTexture","addTexture","devicePixelRatio","value","clampedValue","p0","p1","progress","pu"],"mappings":"AAGA,QAASA,oBAAmBC,OAAQC,gBAAiBC,SAgCnD,QAASC,QACPC,EAAEC,OAAOC,SAAUJ,SACnBK,KAAKC,UAAYC,KAAKC,IAAIJ,SAASK,iBAAmB,EAEtDV,gBAAgBW,UAAUC,aAC1BZ,gBAAgBa,UAAUC,aAC1Bd,gBAAgBe,QAAQC,WACxBhB,gBAAgBiB,MAAMC,UAAWC,WAElBC,GAAEC,SAASC,aAAc,IAAKC,SAAS,GACtDpB,GAAEqB,QAAQC,GAAG,aAAcH,cAE1BtB,gBAAgB,GAAG0B,iBAAiB,YAAaC,aAAa,GAGjE,QAASf,aAAYgB,OACnB,GAAIpB,KAAKC,IAAIoB,YAAcvB,KAAKC,UAAW,CACzC,GAAIuB,OAAQC,kBAAkBH,MAC1BpB,MAAKC,IAAIqB,MAAM,IAAMtB,KAAKC,IAAIqB,MAAM,MACtCE,cAAgBF,MAAM,GAAKG,oBAC3BC,qBAAqB7B,SAAS8B,gBAAiB9B,SAAS+B,iBACxDrC,OAAOsC,SAASC,EAAIN,aACpBjC,OAAOwC,OAAO,GAAIC,OAAMC,QAAQ,EAAE,aAAe,IACjDC,QAAQC,IAAI5C,OAAOsC,YAKzB,QAASf,cAAaM,OACpB,GAAIgB,QAAQ,CACVhB,MAAMiB,gBACN,IAAIC,QAASC,aAAaC,MAAMpB,MAAMqB,cAAcH,QAAQ,IAAM,IAClEjB,aAAuB,GAATiB,OACdI,cAAc7C,SAAS8C,gBAAiB9C,SAASK,iBACjDX,OAAOsC,SAASe,EAAIvB,WACpBwB,eACAX,QAAQC,IAAI5C,OAAOsC,WAIvB,QAASvB,aAAYc,OAClB0B,WAAY,EAGf,QAAStC,WAAUY,OAChB0B,WAAY,EAGf,QAASpC,WAAUU,OACjBgB,SAAU,EAGZ,QAASzB,YAAWS,OAClBgB,SAAU,EAGX,QAASjB,aAAYC,OACnBA,MAAMiB,iBACsB,GAAxBjB,MAAM2B,QAAQC,OACXhD,KAAKC,IAAIoB,YAAcvB,KAAKC,WACA,YAA1BkD,aAAaC,YACf1B,cAAgByB,aAAaE,OAASC,oBACtC1B,qBAAqB7B,SAAS8B,gBAAiB9B,SAAS+B,iBACxDrC,OAAOsC,SAASC,EAAIN,aACpBjC,OAAOwC,OAAO,GAAIC,OAAMC,QAAQ,EAAGT,aAAc,KAIvB,GAAxBJ,MAAM2B,QAAQC,SACpB3B,YAA2C,GAA7B4B,aAAaI,cAC3BX,cAAc7C,SAAS8C,gBAAiB9C,SAASK,iBACjDX,OAAOsC,SAASe,EAAIvB,WACpBwB,gBAIN,QAASA,gBACP,GAAIS,eAAgBtD,KAAKC,IAAIJ,SAAS8C,gBAAkB9C,SAASK,iBAC7DqD,UAAYvD,KAAKC,IAAIoB,WAAaxB,SAAS8C,iBAAmBW,aAClE9B,cAAee,aAAaiB,KAAKhC,aAAciC,WAAYF,WAC3DhE,OAAOsC,SAASC,EAAIN,aACpBjC,OAAOwC,OAAO,GAAIC,OAAMC,QAAQ,EAAE,aAAe,IAGnD,QAASS,eAAcgB,IAAKC,KACtB3D,KAAKC,IAAIoB,YAAcrB,KAAKC,IAAIyD,OAAQrC,WAAaqC,KACrD1D,KAAKC,IAAIoB,YAAcrB,KAAKC,IAAI0D,OAAQtC,WAAasC,KAG3D,QAASjC,sBAAqBgC,IAAKC,KAChCnC,aAAee,aAAaC,MAAMhB,aAAckC,IAAKC,KAGxD,QAASpC,mBAAkBH,OACzB,GAAIwC,QAAS,EACTtB,OAAS,CASb,OAPIQ,aACFc,OAASC,OAASzC,MAAM0C,MACxBxB,OAASyB,OAAS3C,MAAM4C,OAG1BH,OAASzC,MAAM0C,MACfC,OAAS3C,MAAM4C,OACPJ,OAAQtB,QAvIlB,GAAIzC,WACF8C,iBAAiB,GACjBzC,iBAAiB,GACjByB,gBAAiB,IACjBC,gBAAiB,KAGnBqC,MAAKlE,SAEL,IAAI0D,YAAalE,OAAOsC,SAASC,EAC7BN,aAAejC,OAAOsC,SAASC,EAC/BT,WAAa9B,OAAOsC,SAASe,EAC7BE,WAAY,EACZV,SAAU,EACVyB,OAAS,EAETE,OAAS,EAMTX,oBAAsB,GACtB3B,oBAAsB,KAEtB3B,KAAOmE,KAEPhB,aAAe,GAAIiB,cAAa1E,gBA+GpC,OA7GAE,QA6GOuE,KAGR,QAASE,aAAYC,OAAQ5E,iBAyB3B,QAASE,QACPF,gBAAgBa,UAAUC,aAC1Bd,gBAAgBe,QAAQC,WACxBhB,gBAAgBW,UAAUC,aAE1BZ,gBAAgB,GAAG0B,iBAAiB,YAAaC,aAAa,GAGjE,QAASf,aAAYgB,OAClB,GAAIE,OAAQC,kBAAkBH,MAC9B,IAAIpB,KAAKC,IAAIqB,MAAM,IAAMtB,KAAKC,IAAIqB,MAAM,IAAI,CAC1C,GAAIsC,QAASrB,aAAaC,MAAMlB,MAAM,IAAI,GAAK,IAC3C+C,MAAST,OAAS5D,KAAKsE,GAAK,IAAOxE,KAAKyE,gBAC5CC,UAASH,QAIb,QAAS/D,aAAYc,OACnB0B,WAAY,EAGd,QAAStC,WAAUY,OACjB0B,WAAY,EAGd,QAAS3B,aAAYC,OACnBA,MAAMiB,iBACsB,GAAxBjB,MAAM2B,QAAQC,QACc,cAA1BC,aAAaC,YACdmB,MAAQpB,aAAawB,OAAS3E,KAAK4E,iBACnCF,SAASH,QAKhB,QAASG,UAASH,OAChB,IAAK,GAAIM,GAAI,EAAGA,EAAIP,OAAOpB,OAAQ2B,IACjCC,KAAOR,OAAOO,GACdC,KAAKC,aAAc,GAAI7C,OAAMC,QAAQ,EAAE,EAAE,IAAKoC,OAIlD,QAAS9C,mBAAkBH,OACtB,GAAIwC,QAAS,EACTtB,OAAS,CAUb,OARIQ,aACFc,OAASC,OAASzC,MAAM0C,MACxBxB,OAASyB,OAAS3C,MAAM4C,OAG1BH,OAASzC,MAAM0C,MACfC,OAAS3C,MAAM4C,OAEPJ,OAAQtB,QA3ErB2B,KAAKG,OAASA,OACdH,KAAKM,iBAAmB,GACxBN,KAAKS,iBAAmB,GAIxB,IAAIb,QAAS,EACTE,OAAS,EAITjB,WAAY,EAIZhD,KAAOmE,KAEPhB,aAAe,GAAIiB,cAAa1E,gBA6DpC,OA3DAE,QA2DOuE,KAER,QAASC,cAAaY,SAyBtB,QAASpF,QACP,GAAIqF,IAAKD,QAAQ,EACjBC,IAAG7D,iBAAiB,aAAc8D,cAAc,GAChDD,GAAG7D,iBAAiB,YAAaC,aAAa,GAC9C4D,GAAG7D,iBAAiB,WAAY+D,YAAY,GAG9C,QAASD,cAAa5D,OACnBc,QAAQC,IAAI,UAAW+C,KAAMC,MAC7BC,UAAYhE,MAAMiE,UACU,GAAxBjE,MAAM2B,QAAQC,QAChBlD,KAAK8D,OAAQ9D,KAAKwC,OAAS,EAChB4C,KAAO9D,MAAM2B,QAAQ,GAAGe,MACxBqB,KAAO/D,MAAM2B,QAAQ,GAAGiB,OACF,GAAxB5C,MAAM2B,QAAQC,SACvBsC,gBAAkBC,cAAcnE,OAChCoE,aAAeF,iBAInB,QAASnE,aAAYC,OACnBA,MAAMiB,iBACsB,GAAxBjB,MAAM2B,QAAQC,QACfd,QAAQC,IAAI,OAAQ+C,MACpBO,kBAAkBrE,OAClBc,QAAQC,IAAI,UAAW+C,KAAMpF,KAAK8D,QAClC8B,kBACA5F,KAAK2E,OAAS3E,KAAK8D,QAAUxC,MAAMiE,UAAYD,WAC/CtF,KAAKqD,OAASrD,KAAKwC,QAAUlB,MAAMiE,UAAYD,YACf,GAAxBhE,MAAM2B,QAAQC,SACtBsC,gBAAkBC,cAAcnE,OAChCtB,KAAKuD,cAAgBiC,gBAAkBE,aACvCA,aAAeF,iBAIpB,QAASL,YAAW7D,OAClBtB,KAAK8D,OAAQ9D,KAAKwC,OAAS,EAC3BxC,KAAKuD,cAAgB,EAGvB,QAASoC,mBAAkBrE,OACxBtB,KAAK8D,OAAS+B,UAAYT,KAC1BpF,KAAKwC,OAASsD,UAAYT,KAC1BD,KAAO9D,MAAM2B,QAAQ,GAAGe,MACxBqB,KAAO/D,MAAM2B,QAAQ,GAAGiB,MAG3B,QAASuB,eAAcnE,OACpB,GAAIyE,IAAKzE,MAAM2B,QAAS,GAAIe,MAAQ1C,MAAM2B,QAAS,GAAIe,MACtDgC,GAAK1E,MAAM2B,QAAS,GAAIiB,MAAQ5C,MAAM2B,QAAS,GAAIiB,MAEnD+B,SAAW/F,KAAKgG,KAAMH,GAAKA,GAAKC,GAAKA,GACzC,OAAOC,UAGP,QAASL,mBACH1F,KAAKC,IAAIH,KAAKwC,QAAUtC,KAAKC,IAAIH,KAAK8D,QACxC9D,KAAKoD,UAAY,WAEjBpD,KAAKoD,UAAY,aAnFtB,GAKIkC,WALAF,KAAO,EACPC,KAAO,EAEPQ,UAAY,EACZC,UAAY,CAIhB3B,MAAKL,OAAS,EACdK,KAAK3B,OAAS,EACd2B,KAAKQ,OAAS,EACdR,KAAKd,OAAS,EACdc,KAAKf,UAAY,YAEjB,IAAIsC,cAAe,EACfF,gBAAkB,CAEtBrB,MAAKZ,cAAgB,CAErB,IAAIvD,MAAOmE,IA0EV,OAxEDvE,QAkECuE,KAAKgC,UAAY,SAAS7E,OAGxB,MAFAqE,mBAAkBrE,QAETyE,GAAIjC,OAASkC,GAAIxD,SAGrB2B,KAcP,QAASiC,QAAOC,aAAcrB,QAASrF,SA+ExC,QAAS2G,aAEP,GAAIC,WAAYxG,SAASyG,UAAYzG,SAASwG,UAC1CE,UAAY,GAAIvE,OAAMwE,YAE1BD,WAAUE,KAAKJ,UACbK,MACA,SAASC,KACPzE,QAAQC,IAAI,SAAWkE,UAAY,IAAKrG,KAAK4G,MAAMD,IAAIE,OAASF,IAAIG,MAAQ,KAAO,MAErF,SAASH,KACPzE,QAAQC,IAAIwE,OAKlB,QAASD,OAAML,WACbU,SAAW,GAAI/E,OAAMgF,eAAgBC,WAAW,IAChDF,SAASG,cAAcC,oBACvBJ,SAASK,QAAQC,YAAaC,cAE9B9H,gBAAgB+H,OAAOR,SAASS,YAEhCC,MAAQpB,UACRoB,MAAMC,WAAa,GAAI1F,OAAM2F,MAAM9H,SAAS+H,qBAE5C,IAAIC,MAAO,GAAI7F,OAAM8F,WAAY,IAAK,GAAI,IAAU,QACvDL,OAAMM,IAAIF,MAEPG,eAAiB,GAAIhG,OAAMiG,eAE3BD,eAAeE,QAAU,SAAS9G,OAChCc,QAAQC,IAAI,iBACZD,QAAQC,IAAIf,QAGd4G,eAAeG,WAAa,SAAS/G,OACnCc,QAAQC,IAAI,oBACZD,QAAQC,IAAIf,QAGd4G,eAAeI,OAAS,SAAShH,OACZ,GAAfiH,cACFC,cACAC,cACAC,SAEApH,MAAQzB,EAAE8I,MAAM,iBAChBjJ,gBAAgBkJ,QAAQtH,OAExBiH,aAAc,GAIlB,KAAK,GAAI1D,GAAG,EAAGA,EAAIwB,aAAanD,OAAQ2B,IACtCgE,YAAYxC,aAAaxB,IAK7B,QAAS4D,eACPhJ,OAAS,GAAIyC,OAAM4G,kBAAkB/I,SAASgJ,IAAKhJ,SAASiJ,YAAaC,eAAgBC,eACzFzJ,OAAOsC,SAASe,EAAI/C,SAASoJ,eAC7B,IAAIC,QAAqD,IAA5C9E,OAAO,GAAG+E,SAASC,YAAYF,SAASpH,CACrDvC,QAAOsC,SAASC,EAAIoH,OACpBhH,QAAQC,IAAI+G,OAAQ3J,OAAOsC,UAC3BtC,OAAOwC,OAAO,GAAIC,OAAMC,QAAQ,EAAGiH,OAAQ,GAC3C,IAAIG,iBACFnJ,gBAAiBL,SAASoJ,gBAC1BrH,gBAA2D,GAA1CwC,OAAO,GAAG+E,SAASC,YAAYE,OAAOxH,EAEzDyH,eAAgB,GAAIjK,oBAAmBC,OAAQC,gBAAiB6J,gBAGlE,QAASf,eACP,IAAK,GAAI3D,GAAI,EAAGA,EAAI8C,MAAM+B,SAASxG,OAAQ2B,IACvC8E,OAAShC,MAAM+B,SAAS7E,GACL,QAAf8E,OAAOC,OACTD,OAAOE,SAAS7H,EAAIjC,SAAS+J,gBAAkB5J,KAAKsE,GAAK,IACzDF,OAAOyF,KAAKJ,QACZA,OAAOK,SAASC,IAAMC,SAAS,GAC/BP,OAAON,SAASc,qBAItB7F,QAAO,GAAG8F,SAAU,EACpB9F,OAAO,GAAG8F,SAAU,EACpBhI,QAAQC,IAAIiC,OAAO,GAAG+E,SACtB,IAAIgB,OAAQ,GAAInI,OAAMoI,kBAAkBhG,OAAO,GAAI,MACnDlC,SAAQC,IAAIiC,OAAO,GAAG+E,SAASC,YAAYzF,IAAI7B,EAAGsC,OAAO,GAAG+E,SAASC,YAAY1F,IAAI5B,EACrF,IAAIuI,OAAQ,GAAIrI,OAAMoI,kBAAkBhG,OAAO,GAAI,SACnD+F,OAAMG,SACND,MAAMC,SACN7C,MAAMM,IAAIoC,OACV1C,MAAMM,IAAIsC,OAEVE,YAAc,GAAIpG,aAAYC,OAAQ5E,iBAGxC,QAASgL,kBAAiBC,MAGxB,IAAK,GAFDC,SAEK/F,EAAI,EAAGA,EAAIqF,SAAShH,OAAQ2B,IAC/BqF,SAASrF,GAAG8F,MAAQA,OAAQC,QAAUV,SAASrF,GAGrD,OAAO+F,SAGT,QAAS/B,aAAYgC,iBACnBC,YAAc/K,SAASyG,UAAYqE,gBACnCE,cAAgB,GAAI7I,OAAM8I,cAAc9C,gBAExC6C,cAAcpE,KAAKmE,YACjB,SAASF,SACPxI,QAAQC,IAAI,kBACZ4I,aAAaL,QAASC,kBAExB,SAAShE,KACNzE,QAAQC,IAAI,WAAawI,gBAAkB,IAAM3K,KAAK4G,MAAMD,IAAIE,OAASF,IAAIG,MAAQ,KAAO,MAE/F,SAASH,KACPzE,QAAQC,IAAI,gBACZD,QAAQC,IAAIwE,OAKlB,QAASoE,cAAaL,QAASM,UAC7BN,QAAQD,KAAOO,SACfhB,SAASH,KAAKa,SAGhB,QAASO,eAAcP,QAAS9F,MAC9B8F,QAAQQ,aAAc,EACtBtG,KAAKkF,SAASC,IAAMW,QAGtB,QAASS,gBAAerG,SACtB,GAAIjE,UAAWD,EAAEC,SAASuK,eAAgB,KAAMrK,SAAS,GACzDF,UAASiE,SAGX,QAASsG,gBAAetG,SACrBuC,YAAe7H,gBAAgB6L,QAC/B/D,aAAgBD,YAAcxH,SAASiJ,YACvC/B,SAASK,QAAQC,YAAaC,cAC9B/H,OAAO+L,yBAGV,QAAS9C,UACP+C,sBAAsB/C,QACtBzB,SAASyB,OAAOf,MAAOlI,QAGzB,QAASe,aAAYc,OAClB0D,QAAQ0G,IAAI,SAAU,oBACtB1G,QAAQ0G,IAAI,SAAU,YAGxB,QAAShL,WAAUY,OACjB0B,WAAY,EACZgC,QAAQ0G,IAAI,SAAU,gBACtB1G,QAAQ0G,IAAI,SAAU,QAhPzB,GAAI3L,WACFyG,UAAW,UACXD,UAAW,oBACXwC,IAAK,GACLC,YAAa,GACbG,iBAAiB,GACjBwC,gBAAiB,IACjB7B,iBAAiB,GACjBhC,qBAAsB,qBAGxB3D,MAAKyH,OAAS,WACZ/L,EAAEC,OAAOC,SAAUJ,SACnB2G,YAEAzG,EAAEqB,QAAQ2K,OAAO,WACfR,eAAerG,WAGjBA,QAAQzE,UAAUC,aAClBwE,QAAQvE,QAAQC,WAEhBsE,QAAQ0G,IAAI,SAAU,gBACtB1G,QAAQ0G,IAAI,SAAU,SAGxBvH,KAAK2H,aAAe,WAClB,GAAIC,WAAYzH,OAAO,GACnB0H,cAAgB1H,OAAO,EAEE,IAAzB0H,cAAc5B,SAChB2B,UAAU3B,SAAU,EACpB4B,cAAc5B,SAAU,IAExB4B,cAAc5B,SAAU,EACxB2B,UAAU3B,SAAU,GAGtB9I,MAAQzB,EAAE8I,MAAM,sBAChBjJ,gBAAgBkJ,QAAQtH,QAG1B6C,KAAK8H,cAAgB,SAAStB,MAC5B,IAAK,GAAI9F,GAAI,EAAGA,EAAI8C,MAAM+B,SAASxG,OAAQ2B,IACzC8E,OAAShC,MAAM+B,SAAS7E,GACL,QAAf8E,OAAOC,MACTuB,cAAcT,iBAAiBC,MAAOhB,OAI1CrI,OAAQzB,EAAE8I,MAAM,wBAChBjJ,gBAAgBkJ,QAAQtH,QAG1B6C,KAAK+H,WAAarD,YAElB1E,KAAKyH,QAIL,IAEIjE,OAAOlI,OAAQwH,SAEfwD,YAGAvC,eAPAK,aAAc,EAGdjE,UAGA4F,YAGAxK,gBAAkBsF,QAClBuC,YAAc7H,gBAAgB6L,QAC9B/D,aAAgBD,YAAexH,SAASiJ,YACxC3B,mBAAqBnG,OAAOiL,iBAAmBjL,OAAOiL,iBAAmB,EAEzEjD,cAAgB,IAChBD,eAAiB,EAwKrB,OAAO9E,MAlQP,GAAI1B,eAELC,MAAQ,SAAS0J,MAAOxI,IAAKC,KAC1B,GAAIwI,cAAgBD,MAAQvI,IAAOA,IAAOuI,MAAQxI,IAAOA,IAAMwI,KAC/D,OAAOC,eAGV3I,KAAO,SAAS4I,GAAIC,GAAIC,UACrB/J,aAAaC,MAAM8J,SAAU,EAAG,EAChC,IAAIC,IAAKH,IAAMC,GAAKD,IAAME,QAC1B,OAAOC","file":"viewer.min.js"}