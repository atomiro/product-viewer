{"version":3,"sources":["viewer.js"],"names":["CameraDollyControl","camera","rendererElement","init","mousemove","onMouseMove","mousedown","onMouseDown","mouseup","onMouseUp","hover","onHoverIn","onHoverOut","_","debounce","onMouseWheel","leading","$","window","on","addEventListener","onTouchMove","onTouchEnd","onTouchStart","event","Math","abs","cameraDist","obj","panLockAt","delta","getMouseMoveDelta","cameraHeight","constrainVerticalPan","minCameraHeight","maxCameraHeight","position","y","lookAt","THREE","Vector3","console","log","mouseIn","preventDefault","deltaY","ControlUtils","clamp","originalEvent","constrainZoom","minZoomDistance","maxZoomDistance","x","centerCamera","mouseDown","touches","length","initMouseY","pageY","dx","pageX","dy","currentDist","sqrt","lastDist","getTouchMoveVertical","distDelta","mouseY","totalZoomDist","zoomLevel","lerp","initHeight","min","max","touchDelta","deltaX","mouseX","this","MeshControl","meshes","angle","PI","mouseSpeed","rotateTo","touchDeltaX","initMouseX","getTouchMoveDelta","touchSpeed","i","mesh","rotateOnAxis","rotationSpeed","setRotationSpeed","speed","Viewer","textureArray","element","options","loadScene","sceneFile","settings","assetPath","objloader","ObjectLoader","load","setup","xhr","round","loaded","total","renderer","WebGLRenderer","antialias","setPixelRatio","DEVICE_PIXEL_RATIO","setSize","canvasWidth","canvasHeight","append","domElement","scene","background","Color","sceneBackgroundColor","textureManager","LoadingManager","onError","onProgress","onLoad","initialized","setupMeshes","setupCamera","render","Event","trigger","loadTexture","PerspectiveCamera","fov","aspectRatio","CAM_NEAR_PLANE","CAM_FAR_PLANE","cameraXPosition","cameraYPosition","cameraControl","children","object","type","rotation","initialRotation","push","material","map","textures","visible","meshControl","getTextureByName","name","texture","textureFileName","texturePath","textureLoader","TextureLoader","storeTexture","filename","updateTexture","needsUpdate","debounceResize","resizeRenderer","width","updateProjectionMatrix","requestAnimationFrame","create","extend","resize","toggleModels","plusModel","straightModel","switchTexture","addTexture","devicePixelRatio","value","clampedValue","p0","p1","progress","pu"],"mappings":"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","file":"viewer.min.js"}