function CameraDollyControl(camera,rendererElement,options){function init(){$.extend(settings,options),self.panLockAt=Math.abs(settings.maxZoom)-3,totalZoomDist=Math.abs(settings.minZoom-settings.maxZoom),zoomThreshold=Math.abs(settings.maxZoom-settings.minZoom/2),rendererElement.dblclick(onDblClick),rendererElement.mousemove(onMouseMove),rendererElement.mousedown(onMouseDown),rendererElement.mouseup(onMouseUp),rendererElement.hover(onHoverIn,onHoverOut),window.addEventListener("wheel",onMouseWheel),rendererElement[0].addEventListener("touchmove",onTouchMove,!1),rendererElement[0].addEventListener("touchend",onTouchEnd,!1)}function updateZoom(){self.panLockAt=Math.abs(settings.maxZoom)-3,zoomThreshold=Math.abs(settings.maxZoom-settings.minZoom/2)}function initControls(){rendererElement.dblclick(onDblClick),rendererElement.mousemove(onMouseMove),rendererElement.mousedown(onMouseDown),rendererElement.mouseup(onMouseUp),rendererElement.hover(onHoverIn,onHoverOut),window.addEventListener("wheel",onMouseWheel),rendererElement[0].addEventListener("touchmove",onTouchMove,!1),rendererElement[0].addEventListener("touchend",onTouchEnd,!1)}function unbindControls(){rendererElement.off("dblclick",onDblClick),rendererElement.off("mousemove",onMouseMove),rendererElement.off("mousedown",onMouseDown),rendererElement.off("mouseup",onMouseUp),rendererElement.off("hover",onHoverIn,onHoverOut),window.removeEventListener("wheel",onMouseWheel),rendererElement[0].removeEventListener("touchmove",onTouchMove),rendererElement[0].removeEventListener("touchend",onTouchEnd)}function onDblClick(){autoZoom()}function onTouchEnd(event){var delay=300,delta=lastTouchTime?event.timeStamp-lastTouchTime:0;1==event.changedTouches.length&&delta<delay&&delta>100&&(event.preventDefault(),autoZoom()),lastTouchTime=event.timeStamp}function autoZoom(){isAnimating=!0,Math.abs(camera.position.z)>zoomThreshold?0==progress&&(zoomingOut=!1):0==progress&&(zoomingOut=!0)}function onMouseDown(){mouseDown=!0}function onMouseUp(){mouseDown=!1}function onHoverIn(){mouseIn=!0}function onHoverOut(){mouseIn=!1}function onMouseMove(event){if(Math.abs(cameraDist)<self.panLockAt){var delta=getMouseMoveDelta(event);Math.abs(delta[1])>Math.abs(delta[0])&&pan(delta[1],settings.mousePanSpeedFactor)}}function onMouseWheel(event){mouseIn&&(isAnimating=!1,event.preventDefault(),scrollDelta=ControlUtils.clamp(event.deltaY,-100,100),interactiveZoom(scrollDelta,settings.zoomSpeedFactor))}function onTouchMove(event){1==event.touches.length?Math.abs(cameraDist)<self.panLockAt&&(event.preventDefault(),"VERTICAL"==touchTracker.axis&&pan(touchTracker.speedY,settings.touchPanSpeedFactor)):2==event.touches.length&&(event.preventDefault(),isAnimating=!1,interactiveZoom(touchTracker.deltaDistance,settings.zoomSpeedFactor))}function interactiveZoom(speed,factor){cameraDist-=speed*factor,constrainZoom(settings.minZoom,settings.maxZoom),camera.position.z=cameraDist,centerCamera()}function pan(speed,factor){cameraHeight-=speed*factor,constrainVerticalPan(settings.minCameraHeight,settings.maxCameraHeight),camera.position.y=cameraHeight,camera.lookAt(new THREE.Vector3(0,cameraHeight,0))}function centerCamera(){zoomLevel=Math.abs(cameraDist-settings.minZoom)/totalZoomDist,cameraHeight=ControlUtils.lerp(cameraHeight,initHeight,zoomLevel),camera.position.y=cameraHeight,camera.lookAt(new THREE.Vector3(0,cameraHeight,0))}function centerOnObject(object){object.geometry.computeBoundingBox();var boundingBox=object.geometry.boundingBox,center=boundingBox.center().y*object.scale.y;initHeight=center,cameraHeight=center,camera.position.y=center,camera.lookAt(new THREE.Vector3(0,center,0))}function animateZoom(step){isAnimating&&(progress+=step,progress=ControlUtils.clamp(progress,0,1),cameraHeight=ControlUtils.lerp(cameraHeight,initHeight,progress),cameraDist=zoomingOut?ControlUtils.lerp(cameraDist,settings.maxZoom,progress):ControlUtils.lerp(cameraDist,settings.minZoom,progress),camera.position.y=cameraHeight,camera.position.z=cameraDist,camera.lookAt(new THREE.Vector3(0,cameraHeight,0))),progress>=1&&(isAnimating=!1,progress=0)}function constrainZoom(min,max){Math.abs(cameraDist)<Math.abs(min)&&(cameraDist=min),Math.abs(cameraDist)>Math.abs(max)&&(cameraDist=max)}function constrainVerticalPan(min,max){cameraHeight=ControlUtils.clamp(cameraHeight,min,max)}function getMouseMoveDelta(event){var deltaX=0,deltaY=0;return mouseDown&&(deltaX=lastPosition.x-event.pageX,deltaY=lastPosition.y-event.pageY),lastPosition.x=event.pageX,lastPosition.y=event.pageY,[deltaX,deltaY]}var settings={minZoom:12,maxZoom:50,minCameraHeight:2.5,maxCameraHeight:14.5,animationSpeed:.04,touchPanSpeedFactor:.3,mousePanSpeedFactor:.015,zoomSpeedFactor:.2},self=this;this.panLockAt;var lastTouchTime,zoomThreshold,totalZoomDist,scrollDelta,touchTracker=new TouchTracker(rendererElement),initHeight=camera.position.y,cameraHeight=camera.position.y,cameraDist=camera.position.z,lastPosition={x:0,y:0},mouseIn=!1,mouseDown=!1,isAnimating=!1,zoomingOut=!1,progress=0,self=this;return init(),this.animate=function(){animateZoom(settings.animationSpeed)},this.registerControls=initControls,this.unbindControls=unbindControls,this.focus=function(object){object.geometry.computeBoundingBox();var boundingBox=object.geometry.boundingBox,objHeight=boundingBox.size().y,fovRadians=ControlUtils.radians(camera.fov),distance=.5*objHeight/Math.tan(.5*fovRadians);distance+=4,camera.position.z=distance,cameraDist=distance,settings.maxZoom=distance,settings.maxCameraHeight=objHeight-1.5,updateZoom(),centerOnObject(object)},this}function MeshControl(meshes,rendererElement,options){function init(){$.extend(settings,options),registerControls()}function registerControls(){rendererElement.mousedown(onMouseDown),rendererElement.mouseup(onMouseUp),rendererElement.mousemove(onMouseMove),rendererElement.mouseenter(onMouseIn),rendererElement.mouseleave(onMouseOut),rendererElement[0].addEventListener("touchmove",onTouchMove,!1)}function unbindControls(){rendererElement.off("mousedown",onMouseDown),rendererElement.off("mouseup",onMouseUp),rendererElement.off("mousemove",onMouseMove),rendererElement[0].removeEventListener("touchmove",onTouchMove)}function onMouseMove(event){if(updateMouseMoveDelta(event),Math.abs(mouseDeltaX)>Math.abs(mouseDeltaY)){mouseDeltaX=ControlUtils.clamp(mouseDeltaX,-30,30);var angle=mouseDeltaX*Math.PI/180*settings.mouseSpeedFactor;rotateTo(angle)}}function onMouseDown(){idling&&(idling=!1),mouseDown=!0}function onMouseUp(){mouseDown=!1}function onMouseIn(){mouseIn=!0}function onMouseOut(){mouseIn=!1,mouseDown=!1}function onTouchMove(event){if(1==event.touches.length&&"HORIZONTAL"==touchTracker.axis){event.preventDefault(),idling&&(idling=!1);var angle=touchTracker.speedX*Math.PI/180*settings.touchSpeedFactor;rotateTo(angle)}}function rotateTo(angle){for(var axisOfRotation=new THREE.Vector3(0,1,0),i=0;i<meshes.length;i++)meshes[i].rotateOnAxis(axisOfRotation,-angle)}function updateMouseMoveDelta(event){mouseDeltaX=0,mouseDeltaY=0,mouseIn&&mouseDown&&(mouseDeltaX=mouseX-event.pageX,mouseDeltaY=mouseY-event.pageY),mouseX=event.pageX,mouseY=event.pageY}settings={mouseSpeedFactor:.7,touchSpeedFactor:15,idleSpeed:.006},this.meshes=meshes;var mouseX=0,mouseY=0,mouseDeltaX=0,mouseDeltaY=0,mouseDown=!1,mouseIn=!1,idling=!0,touchTracker=new TouchTracker(rendererElement);return init(),this.animate=function(){if(idling)for(var i=0;i<meshes.length;i++)meshes[i].rotation.y+=settings.idleSpeed},this.idle=function(){idling=!0},this.registerControls=registerControls,this.unbindControls=unbindControls,this}function TouchTracker(element){function init(){var elementClass=element.attr("class"),domElement=document.getElementsByClassName(elementClass)[0];domElement.addEventListener("touchstart",onTouchStart,!1),domElement.addEventListener("touchmove",onTouchMove,!1),domElement.addEventListener("touchend",onTouchEnd,!1)}function onTouchStart(event){startTime=event.timeStamp,lastTouchTime=event.timeStamp,1==event.touches.length?(self.deltaX=0,self.deltaY=0,lastPosition.x=event.touches[0].pageX,lastPosition.y=event.touches[0].pageY):2==event.touches.length&&(currentDistance=touchDistance(event),lastDistance=currentDistance)}function onTouchMove(event){1==event.touches.length?(getTouchMoveDelta(event),detectAxis(),self.speedX=self.deltaX/(event.timeStamp-lastTouchTime),self.speedY=self.deltaY/(event.timeStamp-lastTouchTime),lastTouchTime=event.timeStamp):2==event.touches.length&&(currentDistance=touchDistance(event),self.deltaDistance=currentDistance-lastDistance,console.log("delta",self.deltaDistance),lastDistance=currentDistance)}function onTouchEnd(){self.deltaX=0,self.deltaY=0,self.deltaDistance=0}function getTouchMoveDelta(event){self.deltaX=lastPosition.x-event.touches[0].pageX,self.deltaY=lastPosition.y-event.touches[0].pageY,lastPosition.x=event.touches[0].pageX,lastPosition.y=event.touches[0].pageY}function touchDistance(event){var dx=Math.abs(event.touches[0].pageX-event.touches[1].pageX),dy=Math.abs(event.touches[0].pageY-event.touches[1].pageY),distance=Math.sqrt(dx*dx+dy*dy);return distance}function detectAxis(){var axisDiff=Math.abs(self.deltaY-self.deltaX);Math.abs(self.deltaY)>Math.abs(self.deltaX)?axisDiff>2&&(self.axis="VERTICAL"):axisDiff>2&&(self.axis="HORIZONTAL")}var lastTouchTime,currentDistance=0,lastPosition={x:0,y:0},lastDistance=0;this.deltaX=0,this.deltaY=0,this.deltaDistance=0,this.speedX=0,this.speedY=0,this.axis="HORIZONTAL";var self=this;return init(),this.getDeltas=function(event){return getTouchMoveDelta(event),{dx:deltaX,dy:deltaY}},this}function Viewer(options,sceneSettings){function loadScene(){var sceneFile=sceneSettings.scene_path,objLoader=new THREE.ObjectLoader;settings.debug&&console.log("load scene",sceneFile);var loadingPromise=new Promise(function(resolve,reject){objLoader.load(sceneFile,resolve,function(xhr){var percent=xhr.loaded/xhr.total;triggerEvent("viewer.progress",{percent:percent})},reject)});return loadingPromise}function init(file){if(scene=file,renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),renderer.setPixelRatio(DEVICE_PIXEL_RATIO),canvasWidth=rendererElement.width(),canvasHeight=canvasWidth/settings.aspectRatio,renderer.setSize(canvasWidth,canvasHeight),rendererElement.append(renderer.domElement),"transparent"==settings.sceneBackgroundColor)renderer.setClearColor(0,0);else{var bgcolor=new THREE.Color(settings.sceneBackgroundColor);bgcolor?scene.background=bgcolor:scene.background=new THREE.Color(0)}bindElementControls(rendererElement),initMeshControl(),initCamera(),triggerEvent("viewer.initialized"),initialized=!0,0==settings.requestRender&&restart()}function initMeshControl(){for(var options={idleSpeed:settings.idleSpeed},i=0;i<scene.children.length;i++)object=scene.children[i],"Mesh"==object.type&&meshes.push(object);meshControl=new MeshControl(meshes,rendererElement,options)}function initCamera(){camera=new THREE.PerspectiveCamera(settings.fov,settings.aspectRatio,CAM_NEAR_PLANE,CAM_FAR_PLANE),camera.position.z=settings.camHorizontalPosition,camera.position.y=settings.camVerticalPosition,cameraControl=new CameraDollyControl(camera,rendererElement)}function getSettings(type,name){var settings;return settings=sceneSettings[type].filter(function(item){return item.name==name}),settings[0]}function getModel(name){var settings=getSettings("models",name),object=scene.getObjectByName(settings.scene_object);return{mesh:object,settings:settings}}function getTextureByName(name){var texture;return texture=textures.filter(function(item){return item.name==name}),texture[0]}function getTexture(name){var texturePromise;if(textureInitialized(name))texture=getTextureByName(name),texturePromise=Promise.resolve(texture);else{var textureSettings=getSettings("textures",name);if(!textureSettings)var textureSettings=getSettings("maps",name);texturePromise=textureSettings?loadTexture(textureSettings.file,textureSettings.name):Promise.reject("Settings for texture "+name+" not found.")}return texturePromise}function loadTexture(url,name){name||(name=url);var textureLoader=new THREE.TextureLoader,loadingPromise=new Promise(function(resolve,reject){textureLoader.load(url,resolve,function(response){},reject)}).then(function(result){return storeTexture(result,name),result});return loadingPromise}function initModel(name){for(var model=getModel(name),loadMaps=[],i=0;i<model.settings.maps.length;i++){var map=getSettings("maps",model.settings.maps[i]);if(map){var loadMap=getTexture(map.name);loadMaps.push(loadMap)}}return loadMaps.length!=model.settings.maps.length?Promise.reject("Expected "+model.settings.maps.length+"settings for maps, found "+loadMaps.length):Promise.all(loadMaps).then(function(){return applyMaps(model),modelInitialized(name)||(settings.debug&&console.log("initModel",name),models.push(name)),model})}function displayModel(name){initModel(name).then(function(model){currentModel=name,cameraControl.focus(model.mesh),display("models",name)}).catch(function(err){console.log(err),triggerEvent("viewer.error",{message:err})})}function displayTexture(name){var model=getModel(currentModel),textureSettings=getSettings("textures",name);getTexture(name).then(function(texture){renderTexture(texture,model.mesh),useLighting(textureSettings.lighting,model.mesh),triggerEvent("viewer.switchtexture"),settings.debug&&console.log("applied "+name+" to: "+model.mesh.name)}).catch(function(err){console.log(err),triggerEvent("viewer.error",{message:err})})}function displayModelWithTexture(modelName,textureName){var textureSettings=getSettings("textures",textureName),loadTextures=[initModel(modelName),getTexture(textureName)];Promise.all(loadTextures).then(function(result){var model=result[0],texture=result[1];currentModel=modelName,useLighting(textureSettings.lighting,model.mesh),renderTexture(texture,model.mesh),cameraControl.focus(model.mesh),display("models",modelName),triggerEvent("viewer.switchtexture")}).catch(function(err){console.log(err),triggerEvent("viewer.error",{message:err})})}function applyMaps(model){for(var i=0;i<model.settings.maps.length;i++){var mapName=model.settings.maps[i],map=getTextureByName(mapName),mapSettings=getSettings("maps",mapName);mapType=mapSettings.type,"normal"==mapType?model.mesh.material.normalMap=map:"specular"==mapType&&(model.mesh.material.specularMap=map)}}function modelInitialized(modelName){var init=!1;return models.indexOf(modelName)!=-1&&(init=!0),init}function textureInitialized(textureName){var init=!1,texture=getTextureByName(textureName);return texture&&(init=!0),init}function display(type,name){for(var settings=getSettings(type,name),sceneObject=settings.scene_object,objectSettings=sceneSettings[type],i=0;i<objectSettings.length;i++){var object=scene.getObjectByName(objectSettings[i].scene_object);object&&(object.name==sceneObject?object.visible=!0:object.visible=!1)}}function useLighting(name,mesh){if(currentLighting!=name){if(lighting=getSettings("lighting",name),lighting.specular_color){var specularColor=new THREE.Color(Number(lighting.specular_color));mesh.material.specular=specularColor}display("lighting",name),settings.debug&&console.log("useLighting",name),currentLighting=name}}function renderTexture(texture,mesh){mesh.material.map=texture,mesh.material.needsUpdate=!0}function debounceResize(element){var debounce=_.debounce(resizeRenderer,200,{leading:!0});debounce(element)}function resizeRenderer(element){canvasWidth=element.width(),canvasHeight=canvasWidth/settings.aspectRatio,renderer.setSize(canvasWidth,canvasHeight),camera.updateProjectionMatrix()}function render(){requestFrame&&(requestAnimationFrame(render),cameraControl.animate(),meshControl.animate(),renderer.render(scene,camera))}function restart(){requestFrame=!0,render()}function halt(){requestFrame=!1}function onMouseDown(element){element.addClass("viewer-interacting"),element.removeClass("viewer-interact")}function onMouseUp(element){mouseDown=!1,element.removeClass("viewer-interacting"),element.addClass("viewer-interact")}function onMouseOut(element){element.removeClass("viewer-interacting"),element.addClass("viewer-interact")}function triggerEvent(eventName,detail){try{event=$.Event(eventName),detail&&(event.detail=detail),requestAnimationFrame(function(){rendererElement.trigger(event)})}catch(e){console.warn("Modern Event API not supported",e);var event=document.createEvent("CustomEvent");event.initCustomEvent(eventName,!0,!0,detail);var elementClass=rendererElement.attr("class");eventElement=document.getElementsByClassName(elementClass)[0],requestAnimationFrame(function(){eventElement.dispatchEvent(event)})}}function mouseFeedbackListeners(element){element.addClass("viewer-interact"),element.mousedown(function(){onMouseDown(element)}),element.mouseup(function(){onMouseUp(element)}),element.mouseleave(function(){onMouseOut(element)})}function bindElementControls(element){$(window).resize(function(){debounceResize(element)}),mouseFeedbackListeners(element)}function storeTexture(texture,name){settings.debug&&console.log("loaded texture:",name),texture.name=name,textures.push(texture)}var scene,camera,renderer,rendererElement,canvasWidth,canvasHeight,cameraControl,meshControl,currentModel,currentLighting,settings={container:$(".viewer"),fov:23,aspectRatio:.8,camHorizontalPosition:35,camVerticalPosition:0,idleSpeed:.006,debug:!1,requestRender:!1},initialized=!1,requestFrame=!0,sceneSettings=sceneSettings,meshes=[],models=[],textures=[],DEVICE_PIXEL_RATIO=window.devicePixelRatio?window.devicePixelRatio:1,CAM_FAR_PLANE=500,CAM_NEAR_PLANE=5,self=this;return this.create=function(){$.extend(settings,options),rendererElement=settings.container,1==self.checkRenderingContext()?loadScene().then(function(scene){init(scene)}).catch(function(err){console.log(err),triggerEvent("viewer.error",{message:err})}):triggerEvent("viewer.error",{message:"WebGL unavailable"})},this.displayImageAsTexture=function(image,name){texture=new THREE.Texture(image),storeTexture(texture,name),self.displayTexture(name),triggerEvent("viewer.switchtexture")},this.addTextureFromImage=function(image,name){texture=new THREE.Texture(image),storeTexture(texture,name)},this.displayModel=displayModel,this.displayTexture=displayTexture,this.displayModelWithTexture=displayModelWithTexture,this.createControls=function(){cameraControl.registerControls(),meshControl.registerControls()},this.unbindControls=function(){cameraControl.unbindControls(),meshControl.unbindControls()},this.start=function(){restart(),self.createControls()},this.stop=function(){halt(),self.unbindControls()},this.idle=function(){meshControl.idle()},this.checkRenderingContext=function(){var canvas=document.createElement("canvas"),gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl");return!!(gl&&gl instanceof WebGLRenderingContext)},this.create(),this}Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value},function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory():"function"==typeof define&&define.amd?define(factory):factory()}(this,function(){"use strict";function finallyConstructor(callback){var constructor=this.constructor;return this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){return constructor.reject(reason)})})}function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;return 0===self._state?void self._deferreds.push(deferred):(self._handled=!0,void Promise._immediateFn(function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._state?resolve:reject)(deferred.promise,self._value);var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)}))}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if("function"==typeof then)return void doResolve(bind(then,newValue),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise._immediateFn(function(){self._handled||Promise._unhandledRejectionFn(self._value)});for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn(function(value){done||(done=!0,resolve(self,value))},function(reason){done||(done=!0,reject(self,reason))})}catch(ex){if(done)return;done=!0,reject(self,ex)}}var setTimeoutFunc=setTimeout;Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.prototype.finally=finallyConstructor,Promise.all=function(arr){return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0===--remaining&&resolve(args)}catch(ex){reject(ex)}}if(!arr||"undefined"==typeof arr.length)throw new TypeError("Promise.all accepts an array");var args=Array.prototype.slice.call(arr);if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise._immediateFn="function"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise._unhandledRejectionFn=function(err){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",err)};var globalNS=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in globalNS?globalNS.Promise.prototype.finally||(globalNS.Promise.prototype.finally=finallyConstructor):globalNS.Promise=Promise});var ControlUtils={clamp:function(value,min,max){var clampedValue=value>max?max:value<min?min:value;return clampedValue},lerp:function(p0,p1,progress){ControlUtils.clamp(progress,0,1);var pu=p0+(p1-p0)*progress;return pu},radians:function(deg){var rad=deg*(Math.PI/180);return rad}};
//# sourceMappingURL=viewer.min.js.map