<!DOCTYPE html>
<html>

<head> 
    <meta name="robots" content="noindex" />
    <meta charset="UTF-8"/>
      <meta content="user-scalable=yes, width=device-width, initial-scale=1.0, maximum-scale=4" name="viewport"/>
    <title>simple threejs design preview</title>
    <link href="highlight/prism.css" rel="stylesheet" type="text/css"/>
    <link href="assets/basic.css" rel="stylesheet" type="text/css"/>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/lodash/4.16.4/lodash.min.js"></script>
    <script src="assets/vendor/three.js"></script>
    <script src="release/viewer.min.js"></script>
    <script type="text/javascript">
    
    var viewer;
    
    $(document).ready( function(){
    
      var isRendering = false;
    
      var settings = { 
        sceneFile: "assets/scene_good.json",
        sceneBackgroundColor: "rgb(0, 40, 40)"
      }
      var viewerDiv = $('.preview');
      viewer = new Viewer('assets/Azalea-V1S13-01.jpg', viewerDiv, settings);
      
      viewerDiv.on('viewer.loaded', function(){ 
        $(this).addClass("show-viewer"); 
        viewer.addTextures(['assets/Bismuth-V1S12-Grey-01.jpg']);
        isRendering = true;
      });
      
      $('.switch').click( function(){
        viewer.toggleModels();
      });
      
      $('.show-texture').click( function(){
        textureFile = $(this).data('texture');
        lighting = $(this).data('lighting');
        viewer.switchTexture(textureFile);
        viewer.changeLighting(lighting);
      });
      
      $('.render-control').click( function(){
        if (isRendering) {
          viewer.halt();
          isRendering = false;
          $(this).text("Start");
        } else {
          viewer.restart();
          isRendering = true;
          $(this).text("Stop");
        }
      });
      
    });
    </script>
    
    <style type="text/css">
     .preview { 
	    height: 100%;
	    width: 50%;
	    opacity: 0;
	    
	    -webkit-transition: opacity .3s ease-in-out;
        -moz-transition: opacity .3s ease-in-out;
        -o-transition: opacity .3s ease-in-out;
        transition: opacity .3s ease-in-out;
        
        -webkit-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
	  }
	  
	  canvas {
	    width: 100%;
	    height: 100%;
	   }
	   
	   .show-viewer {
	     opacity: 1;
	   }
	   
	   @media screen and (max-width: 530px){
	     .preview { 
	       height: 100%;
	       width: 100%;
	      }
	   }
    </style>
</head>

<body>
  <div class="container">
  <h1>Design Viewer</h1>

  <div class="preview"></div>

  <div class="controls">
   <button class="switch">Switch Model</button>
   <button class="show-texture" 
     data-texture="assets/Azalea-V1S13-01.jpg" 
     data-lighting ="light">Azalea</button>
   <button class="show-texture" 
     data-texture="assets/Bismuth-V1S12-Grey-01.jpg" 
     data-lighting="dark">Bismuth</button>
   <button class="render-control">Stop</button>
   
   <h3>Controls</h3>
   <p>
     Scroll wheel or two fingered scroll to zoom in and out.
   </p>
   <p>
     Click + drag to rotate the model and pan the camera. 
   </p>
  </div>
  
  
  
  <h2>Requirements</h2>
  <p>
   The Viewer requires <a href="http://jquery.com/download/#using-jquery-with-a-cdn">jQuery</a> and <a href="https://lodash.com/docs/4.16.4">lodash</a> and THREE.js (r81) (THREE.js is included in the repo in js/vendor), please include these in your document before including releases/viewer.js. Only debounce is used from lodash, so feel free to use an exported module of lodash's debounce to save kB. 
  </p>
  <div class=note>
    <h3>Why JQuery?</h3>
    <p>JQuery normalizes inputs and provides the most accurate element width calculation across browsers. While I tried to avoid using it to minimize the js asset load, ultimately that accuracy outweighed load time consideration, and if the viewer is used in the shop jQuery will already be available anyway.</p>
 </div>
 <h2> Basic Usage </h2> 
  <pre class="language-javascript">
    <code>
      new Viewer([textureArray], container, settingsObject); 
    </code>
  </pre>
  <p>  
   Initialize the Viewer with an array of texture file names. Textures can be jpg or png.  
   The Viewer will look in /assets by default. See <a href="#settings"> settings </a> to on how to change this and other defaults. 
  </p>
 <p>  
   The most basic use of the Viewer requires just a single div's worth of markup.
   This container div is where the Viewer's canvas element will be appended. 
 </p>
  <div class=note>
    <h3>Use JQuery to select your container element</h3>
    <p>The viewer init function assumes you're using JQuery to select the element to render within. Using JQuery objects allows accurate width calculations. The canvas will render within the full width of its container element. The height is width x the aspect ratio, with the default aspect ratio of 4/5.</p>
 </div>
  
  <h3> Example </h3> 
<pre class="language-markup">
  <code class="language-markup">
    <xmp>
    <!DOCTYPE html>
    <html>
    <head>
        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.1.0.min.js"
                integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="
                crossorigin="anonymous">
        </script>
        <!-- lodash -->
        <script src="https://cdn.jsdelivr.net/lodash/4.16.4/lodash.min.js"></script>
        <!-- THREE.js -->
        <script src="js/vendor/three.js"></script>
        <!-- viewer -->
        <script src="release/viewer.js"></script>
        <!-- initialize viewer -->
        <script type="text/javascript">
          $(document).ready( function(){
          
            var container = $('.viewer-container');
            var viewer = new Viewer(['Butterflies-V1S13b.png','FireTights-V1S13b.jpg'],
                                     container);
            });
        </script>
    </head>
    <body>
        
      <div class="viewer-container">
        <!-- THREE.js will add a canvas element here on init -->
      </div>
           
    </body>
        
    </html>
   </xmp>
   </code>
</pre>
  </p>
  
<a name="settings"><h2>Settings</h2></a>
 <p> Use the Viewer's settings to set the path to your texture assets and to adjust the way the scene is rendered including camera position and background color. All settings are optional but setting the asset path is recommended. </p>
  <h3>Example</h3>  
  <pre class="language-javascript">
    <code>
    var settings = {
      assetPath: "set-your-own/asset/path/",
      sceneBackgroundColor: "rgb(0, 0, 0)"
    }
    
    var viewer = new Viewer(['Butterflies-V1S13b.png', 'FireTights-V1S13b.jpg'],
                            container, 
                            settings);
    </code>
  </pre>
  
  <h3> Viewer Settings and Defaults </h3>
    <h4>File Settings</h4>
    <ul>
    <li> 
      <p><kbd>assetPath</kbd> default "assets/"</p>
    </li>
    <li> 
      <p><kbd>sceneFile</kbd> default "models_scene.json"</p>
      <p> Scene files are looked for in the same place as the texture assets.</p>
    </li>
    </ul>
    
    <h4> Scene Settings</h4>
    <ul>
    <li> 
      <p><kbd>aspectRatio</kbd> default 4/5</p>
      <p>Canvas and camera aspect ratio.</p>
    </li>
    <li> 
      <p><kbd>cameraXPosition</kbd> default -50</p>
    </li>
    <li> 
      <p><kbd>cameraYPosition</kbd> default 8.5</p>
    </li>
      <li> 
      <p><kbd>fov</kbd> default 23</p>
      <p>Camera field of view, default is Maya's camera angle.</p>
    </li>
    <li> 
      <p><kbd>initialRotation</kbd> default -90</p>
      <p>Set the meshes in the scene to this rotation.</p>
    </li>
    <li> 
      <p><kbd>sceneBackgroundColor</kbd> default "rgb(100, 100, 100)"</p>
      <p>Colors are in css rgb or hsl syntax.</p>
    </li>
    </ul>
    
    
<h2>Methods</h2>
<ul>
  <li>
   <p><kbd>.switchTexture(name)</kbd></p>
   <p>
   Takes a filename and switches the texture to use that file. You may only 
   switch between texture files the viewer has been initialized with. 
   </p>
   <pre class="language-javascript">
     <code>
       viewer.switchTexture('FireTights-VS13b.jpg');
     </code>
   </pre>
  </li>
  <li>
   <p><kbd>.toggleModels()</kbd></p>
   <p>Toggle between straight and curvy style meshes.</p>
  </li>
</ul> 

<h2> Events </h2>
 <p> Listen for events on the DOM element you initialized the Viewer with. </p>
 <h3> Example </h3>
 <pre class="language-javascript">
    <code>
        container.on('viewer.loaded', function(){ 
            $(this).addClass("show-viewer"); 
        });
    </code>
  </pre>      
  <ul>
    <li>
      <p><kbd>viewer.loaded</kbd></p>
      <p>Event fires when all the texture files in the array have completed loading.</p>
      </pre>
    </li>
    <li>
      <p><kbd>viewer.switchtexture</kbd></p>
      <p>Event is fired when <kbd>switchTexture(name)</kbd> completes.</p>
    </li>
    <li>
      <p><kbd>viewer.togglemodel</kbd></p>
      <p>Event fires when <kbd>toggleModels()</kbd> completes.</p>
    </li>
  </ul>  
    
  </div>
<script src="highlight/prism.js"></script>
</body>

</html>
  
  